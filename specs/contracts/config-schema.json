{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Azure Compute Gallery Copy Tool Configuration",
  "description": "Configuration schema for the Azure Compute Gallery cross-subscription copy tool",
  "type": "object",
  "required": ["source", "target", "authentication"],
  "properties": {
    "source": {
      "type": "object",
      "description": "Source Azure context",
      "required": ["subscriptionId", "resourceGroupName", "galleryName"],
      "properties": {
        "tenantId": {
          "type": "string",
          "description": "Azure tenant ID (GUID format)",
          "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",
          "examples": ["12345678-1234-1234-1234-123456789012"]
        },
        "subscriptionId": {
          "type": "string",
          "description": "Azure subscription ID (GUID format)",
          "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",
          "examples": ["11111111-1111-1111-1111-111111111111"]
        },
        "resourceGroupName": {
          "type": "string",
          "description": "Resource group name",
          "minLength": 1,
          "maxLength": 90,
          "pattern": "^[a-zA-Z0-9-_.()]+$",
          "examples": ["source-rg"]
        },
        "galleryName": {
          "type": "string",
          "description": "Gallery name",
          "minLength": 1,
          "maxLength": 80,
          "pattern": "^[a-zA-Z0-9.]+$",
          "examples": ["source-gallery"]
        }
      },
      "additionalProperties": false
    },
    "target": {
      "type": "object",
      "description": "Target Azure context (must be in same tenant as source)",
      "required": ["subscriptionId", "resourceGroupName", "galleryName"],
      "properties": {
        "tenantId": {
          "type": "string",
          "description": "Azure tenant ID (GUID format, must match source tenant ID)",
          "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",
          "examples": ["12345678-1234-1234-1234-123456789012"]
        },
        "subscriptionId": {
          "type": "string",
          "description": "Azure subscription ID (GUID format)",
          "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",
          "examples": ["22222222-2222-2222-2222-222222222222"]
        },
        "resourceGroupName": {
          "type": "string",
          "description": "Resource group name",
          "minLength": 1,
          "maxLength": 90,
          "pattern": "^[a-zA-Z0-9-_.()]+$",
          "examples": ["target-rg"]
        },
        "galleryName": {
          "type": "string",
          "description": "Gallery name",
          "minLength": 1,
          "maxLength": 80,
          "pattern": "^[a-zA-Z0-9.]+$",
          "examples": ["target-gallery"]
        }
      },
      "additionalProperties": false
    },
    "authentication": {
      "type": "object",
      "description": "Authentication configuration",
      "required": ["tenantId", "clientId"],
      "properties": {
        "tenantId": {
          "type": "string",
          "description": "Azure tenant ID for authentication (GUID format, must match source and target tenant ID)",
          "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",
          "examples": ["12345678-1234-1234-1234-123456789012"]
        },
        "clientId": {
          "type": "string",
          "description": "Azure AD application (client) ID for authentication (GUID format)",
          "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",
          "examples": ["abcdef01-abcd-abcd-abcd-abcdef012345"]
        }
      },
      "additionalProperties": false
    },
    "filter": {
      "type": "object",
      "description": "Filter criteria for selecting images and versions to copy",
      "properties": {
        "imageDefinitionIncludes": {
          "type": "array",
          "description": "Patterns for image definition names to include (empty = all)",
          "items": {
            "type": "string",
            "minLength": 1
          },
          "default": [],
          "examples": [["ubuntu", "windows-server"]]
        },
        "imageDefinitionExcludes": {
          "type": "array",
          "description": "Patterns for image definition names to exclude",
          "items": {
            "type": "string",
            "minLength": 1
          },
          "default": [],
          "examples": [["test", "deprecated"]]
        },
        "versionIncludes": {
          "type": "array",
          "description": "Patterns for version names to include (empty = all)",
          "items": {
            "type": "string",
            "minLength": 1,
            "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+.*$"
          },
          "default": [],
          "examples": [["1.0", "2.0"]]
        },
        "versionExcludes": {
          "type": "array",
          "description": "Patterns for version names to exclude",
          "items": {
            "type": "string",
            "minLength": 1
          },
          "default": [],
          "examples": [["0.0", "alpha"]]
        },
        "matchMode": {
          "type": "string",
          "description": "Pattern matching mode",
          "enum": ["prefix", "contains"],
          "default": "prefix",
          "examples": ["prefix"]
        }
      },
      "additionalProperties": false
    },
    "dryRun": {
      "type": "boolean",
      "description": "Enable dry-run mode (no actual resource creation, plan only)",
      "default": false,
      "examples": [false]
    },
    "logLevel": {
      "type": "string",
      "description": "Logging level",
      "enum": ["Trace", "Debug", "Information", "Warning", "Error", "Critical"],
      "default": "Information",
      "examples": ["Information"]
    }
  },
  "additionalProperties": false,
  "examples": [
    {
      "source": {
        "tenantId": "12345678-1234-1234-1234-123456789012",
        "subscriptionId": "11111111-1111-1111-1111-111111111111",
        "resourceGroupName": "source-rg",
        "galleryName": "source-gallery"
      },
      "target": {
        "tenantId": "12345678-1234-1234-1234-123456789012",
        "subscriptionId": "22222222-2222-2222-2222-222222222222",
        "resourceGroupName": "target-rg",
        "galleryName": "target-gallery"
      },
      "authentication": {
        "tenantId": "12345678-1234-1234-1234-123456789012",
        "clientId": "abcdef01-abcd-abcd-abcd-abcdef012345"
      },
      "filter": {
        "imageDefinitionIncludes": ["ubuntu", "windows-server"],
        "imageDefinitionExcludes": ["test"],
        "versionIncludes": [],
        "versionExcludes": ["0.0"],
        "matchMode": "prefix"
      },
      "dryRun": false,
      "logLevel": "Information"
    },
    {
      "source": {
        "subscriptionId": "11111111-1111-1111-1111-111111111111",
        "resourceGroupName": "source-rg",
        "galleryName": "source-gallery"
      },
      "target": {
        "subscriptionId": "22222222-2222-2222-2222-222222222222",
        "resourceGroupName": "target-rg",
        "galleryName": "target-gallery"
      },
      "authentication": {
        "tenantId": "12345678-1234-1234-1234-123456789012",
        "clientId": "abcdef01-abcd-abcd-abcd-abcdef012345"
      },
      "dryRun": true,
      "logLevel": "Debug"
    }
  ]
}
